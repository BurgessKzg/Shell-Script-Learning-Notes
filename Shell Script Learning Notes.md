> &emsp;&emsp;GNU/Linux shell是一种特殊的交互式工具。它为用户提供了启动程序、管理文件系统中的文件以及运行在Linux系统上的进程的途径。
> &emsp;&emsp;在Linux系统上，通常有好几种Linux shell可用。不同的shell有不同的特性，有些更利于创建脚本，有些则更利于管理进程。

> &emsp;&emsp;将多个shell命令放入文件中作为程序执行,这些文件被称作shell脚本。

# 1. shell编程脚本基础

## 1.1. 构建基本脚本

### 1.1.1. 使用多个命令

> &emsp;&emsp;shell可以将多个命令串起来一次执行完成,如果要多个命令一起运行，可以把它们放在同一行中，彼此间用分号隔开(不超过最大命令行字符数255)。  

 - **eg:**    
    ```Shell
    $ date ; who
    ```

### 1.1.2. 创建shell脚本文件

> 1. 使用文本编辑器创建一个文件；
> 2. 必须在文件的第一行指定要使用的shell，格式： "`#!/bin/bash`"，"bash"可以换为别的shell；
> 3. 指定shell后就可以在每一行输入命令，然后加一个回车符；

- **注意**
    > - shell脚本中**井号**(#)用作**注释行**，shell**不处理**注释行，**第一行**是个例外，"#"后面的惊叹号告诉shell用哪个shell来运行脚本; 
    > - shell脚本中注释可用"#"添加，可以出现在**任意行**；
    > - shell脚本中可以根据需要使用**分号**将多个命令放在一行上；
    > - shell会按命令在文件中出现的**顺序**进行处理；
    > - shell会通过"**PATH**环境变量"来查找命令；
    > - 执行脚本需要让shell能找到脚本位置，方法：
    >   - 将shell脚本文件所处的目录添加到"PATH"环境变量中；
    >   - 在提示符中用绝对或相对文件路径来引用shell脚本文件；
    > - 如果umask使得创建的文件没有执行权限，使用"chmod"添加执行权限；

### 1.1.3. 显示消息

> 在"echo"命令后加上一个字符串，该命令能回显这个文本字符串；  

- **注意**
    > - 默认情况**不需要**使用引号将要显示的文本字符串划定；
    > - 要显示的字符串包括"'"(单引号)时，需要将字符串用"""(双引号)划定；
    > - 要显示的字符串包括"""(双引号)时，需要将字符串用"'"(单引号)划定；
    > - 以上两条不必用"""(双引号)或"'"单引号将整个字符串划定起来；
    > - "echo"回显的数据默认会换行，可以加"-n"选项去掉换行； 

### 1.1.4. 使用变量

> &emsp;&emsp;变量允许你临时性地将信息存储在shell脚本中，以便和脚本中的其他命令一起使用。

#### 1.1.4.1. 环境变量

> &emsp;&emsp;shell维护一组环境变量，用来记录特定系统信息。比如系统名称、登录到系统上的用户名、用户的系统ID(也称为UID)、用户默认主目录以及shell查找程序的搜索路径。可以用"**set**"命令来显示一份**完整的**当前环境变量列表。

> - 脚本中，可以在环境变量名称前加上"$"(美元符)来使用环境变量(不需要加"-n"选项)，这个时候可以将环境变量放到引号里；
> - 脚本在引号中出现"$"(美元符)，它会以为你在引用一个变量；
> - 要在引号中显示"$"(美元符)，需要在它前面添加"\\"(反斜线)；

#### 1.1.4.2. 用户变量

> &emsp;&emsp;shell脚本允许在脚本中定义和使用自己的变量(用户变量)，定义变量允许临时存储数据并在整个脚本中使用。

> - 用户变量可是字母、数字或下划线任意组成的文本字符串；
> - 用户变量长度不超过20个字符；
> - 用户变量区分大小写；
> - 使用等号赋值给用户变量，在变量、等号和值之间**不能**出现空格；
> - shell脚本会自动决定变量值的数据类型；
> - 在脚本的整个生命周期里，shell脚本中定义的变量会一直保持它们的值，**但**在shell脚本结束时会被**删除**；
> - 与系统变量类似，用户变量可通过"$"(美元符)引用，变量每次被引用时，都会输出当前赋给它的值；
> - 引用一个**变量值时需要**使用美元符，而引用变量来对其进行赋值时则**不需要**使用美元符，没有美元符，shell会将变量名解释成普通的文本字符串；
> - 通过"${variable}"形式引用的变量,变量名两侧额外的花括号通常用来帮助识别美元符后的变量名；

#### 1.1.4.3. 命令替换

> &emsp;&emsp;shell脚本中，可以从命令输出中提取信息，并将其赋给变量。

- 两种方法可以将命令输出赋给变量：
    > - "\`"(反引号)，用一对反引号把整个命令行命令围起来；
    ```Shell
    var=`date`
    ```
    > - "$()"格式    
    ```shell
    var=$(date)
    ```
- **注意**
    > - 反引号字符**不是**用于字符串的那种普通单引号字符；
    > - 命令替换会创建一个子shell来运行对应的命令,由该子shell所执行命令是无法使用脚本中所创建的变量；
    > - 在命令行提示符下使用路径"./"运行命令也会创建子shell；要是运行命令的时候不加入路径就不会创建子shell，如果使用内建的shell命令，并不会涉及子shell；

- **eg:**
    > - 在脚本中通过命令替换获得当前日期并用它来生成唯一文件名
    ```shell
    #!/bin/bash
    # copy the /usr/bin directory listing to a log file
    # 格式化后的"date"命令的输出
    today=$(date +%y%m%d)
    ls /usr/bin -al > log.$today
    ```

### 1.1.5. 重定向输入和输出

#### 1.1.5.1. 输出重定向

#### 1.1.5.2. 输入重定向


# 疑问：
- shell内建命令有哪些？
- 运行命令的时候不加入路径就不会创建子shell？